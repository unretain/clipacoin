<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clip a Coin - $CLIPR</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('download (2).png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        h1 {
            color: #ffffff;
            font-size: 3rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 1rem;
        }

        .counter {
            font-size: 2.5rem;
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .coin-container {
            position: relative;
            cursor: pointer;
            user-select: none;
        }

        .quarter {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.5));
        }

        .quarter:hover {
            transform: scale(1.02);
        }

        .quarter:active {
            transform: scale(0.98);
        }

        .coin-mask {
            width: 100%;
            height: 100%;
        }

        .clip-particle {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('download.png');
            background-size: 200px 150px;
            pointer-events: none;
            animation: clipFly 1.2s ease-out forwards;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.4));
        }

        @keyframes clipFly {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(0deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.5);
            }
        }

        .flag-particle {
            position: absolute;
            width: 60px;
            height: 40px;
            background-image: url('Flag_of_Israel.svg.png');
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            animation: flagFloat 3s ease-out forwards;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.4));
        }

        @keyframes flagFloat {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(0deg) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translate(var(--tx1), var(--ty1)) rotate(var(--rot1)) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx2), var(--ty2)) rotate(var(--rot2)) scale(0.8);
            }
        }

        .instructions {
            margin-top: 2rem;
            color: rgba(255,255,255,0.7);
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <h1>Clip a Coin</h1>
    <div class="counter">$CLIPR: <span id="clipr-count">0</span></div>

    <div class="coin-container" id="coin">
        <div class="quarter" id="quarter">
            <svg class="coin-mask" viewBox="0 0 280 280">
                <defs>
                    <clipPath id="coinClip">
                        <circle cx="140" cy="140" r="140" id="coinCircle"/>
                    </clipPath>
                    <mask id="coinMask">
                        <circle cx="140" cy="140" r="140" fill="white"/>
                        <g id="clipMarks"></g>
                    </mask>
                </defs>
                <image
                    href="download (1).png"
                    x="0" y="0"
                    width="280" height="280"
                    clip-path="url(#coinClip)"
                    mask="url(#coinMask)"
                    preserveAspectRatio="xMidYMid slice"
                />
            </svg>
        </div>
    </div>

    <p class="instructions">Click the quarter to clip it!</p>

    <script>
        let cliprCount = 0;
        const countDisplay = document.getElementById('clipr-count');
        const coin = document.getElementById('coin');
        const quarter = document.getElementById('quarter');
        const clipMarks = document.getElementById('clipMarks');

        function createClipParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'clip-particle';

            const angle = Math.PI / 2 + (Math.random() - 0.5) * 1.5;
            const distance = 150 + Math.random() * 200;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;
            const rotation = (Math.random() - 0.5) * 1080;

            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');
            particle.style.setProperty('--rot', rotation + 'deg');

            const bgX = Math.random() * 160;
            const bgY = Math.random() * 110;
            particle.style.backgroundPosition = `-${bgX}px -${bgY}px`;

            const size = 25 + Math.random() * 30;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1200);
        }

        function createFlagParticle(x, y) {
            const flag = document.createElement('div');
            flag.className = 'flag-particle';

            // Random wandering path
            const tx1 = (Math.random() - 0.5) * 200;
            const ty1 = -50 - Math.random() * 100;
            const tx2 = tx1 + (Math.random() - 0.5) * 300;
            const ty2 = ty1 - 100 - Math.random() * 200;
            const rot1 = (Math.random() - 0.5) * 30;
            const rot2 = rot1 + (Math.random() - 0.5) * 60;

            flag.style.left = x + 'px';
            flag.style.top = y + 'px';
            flag.style.setProperty('--tx1', tx1 + 'px');
            flag.style.setProperty('--ty1', ty1 + 'px');
            flag.style.setProperty('--tx2', tx2 + 'px');
            flag.style.setProperty('--ty2', ty2 + 'px');
            flag.style.setProperty('--rot1', rot1 + 'deg');
            flag.style.setProperty('--rot2', rot2 + 'deg');

            // Random size
            const scale = 0.5 + Math.random() * 0.8;
            flag.style.width = (60 * scale) + 'px';
            flag.style.height = (40 * scale) + 'px';

            document.body.appendChild(flag);
            setTimeout(() => flag.remove(), 3000);
        }

        function addClipToCoin(clickX, clickY) {
            const rect = quarter.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            // Calculate position relative to SVG coordinates
            const relX = ((clickX - rect.left) / rect.width) * 280;
            const relY = ((clickY - rect.top) / rect.height) * 280;

            // Calculate angle from center
            const angle = Math.atan2(relY - 140, relX - 140);

            // Place clip mark on the edge
            const edgeX = 140 + Math.cos(angle) * 125;
            const edgeY = 140 + Math.sin(angle) * 125;

            // Create irregular clip shape - bigger and more visible
            const clipSize = 15 + Math.random() * 20;
            const points = [];
            const numPoints = 6 + Math.floor(Math.random() * 4);

            for (let i = 0; i < numPoints; i++) {
                const a = (i / numPoints) * Math.PI * 2;
                const r = clipSize * (0.5 + Math.random() * 0.5);
                const px = edgeX + Math.cos(a) * r;
                const py = edgeY + Math.sin(a) * r;
                points.push(`${px},${py}`);
            }

            const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            polygon.setAttribute('points', points.join(' '));
            polygon.setAttribute('fill', 'black');

            clipMarks.appendChild(polygon);
        }

        coin.addEventListener('click', (e) => {
            cliprCount++;
            countDisplay.textContent = cliprCount.toLocaleString();

            const x = e.clientX;
            const y = e.clientY;

            // Create scrap particles
            for (let i = 0; i < 2 + Math.floor(Math.random() * 2); i++) {
                setTimeout(() => {
                    createClipParticle(
                        x - 20 + (Math.random() - 0.5) * 30,
                        y - 20 + (Math.random() - 0.5) * 30
                    );
                }, i * 50);
            }

            // Create floating flags
            for (let i = 0; i < 1 + Math.floor(Math.random() * 2); i++) {
                setTimeout(() => {
                    createFlagParticle(
                        x - 30 + (Math.random() - 0.5) * 40,
                        y - 20 + (Math.random() - 0.5) * 40
                    );
                }, i * 100 + 50);
            }

            addClipToCoin(x, y);
        });
    </script>
</body>
</html>
